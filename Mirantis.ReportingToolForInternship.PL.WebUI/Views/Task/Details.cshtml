@using Mirantis.ReportingTool.PL.WebUI.Constants

@model Mirantis.ReportingTool.PL.WebUI.Models.TaskVM

@{
	ViewBag.Title = "Details task";
	AjaxOptions ajaxOpts = new AjaxOptions
	{
		Url = Url.Action("DeleteTask"),
		HttpMethod = "post",
		OnSuccess = "redirect",
		OnBegin = "lockAllFunctions",
		OnComplete = "unlockAllFunctions",
		OnFailure = "unlockAllFunctions",
		Confirm = "Are you sure that you wanna delete this task?"
	};
}

<h2>Details task</h2>

@using (Ajax.BeginForm("DeleteTask", null, ajaxOpts, new { @class = "form-horizontal" }))
{
	@Html.AntiForgeryToken()
	<hr />
	@Html.HiddenFor(model => model.Id)

	<div class="form-group">
		@Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Title, new
			{
				htmlAttributes = new
				{
					@class = "form-control",
					@type = "text",
					@readonly = "true",
					@value = Model.Title,
					@data_toggle = "tooltip",
					@data_placement = "bottom",
					@title = Model.Title
				}
			})
		</div>
	</div>

	<div class="form-group">
		@Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Description, new
			{
				htmlAttributes = new
				{
					@class = "form-control",
					@type = "text",
					@readonly = "true",
					@value = Model.Description,
					@data_toggle = "tooltip",
					@data_placement = "bottom",
					@title = Model.Description,
					@rows = 5
				}
			})
		</div>
	</div>

	<div class="form-group">
		@Html.LabelFor(model => model.ProjectId, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Project.Name, new { htmlAttributes = new { @class = "form-control", @type = "text", @readonly = "true", @value = Model.Project.Name } })
		</div>
	</div>

	<div class="form-group">
		@Html.LabelFor(model => model.ReporterId, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Reporter.FullName, new { htmlAttributes = new { @class = "form-control", @type = "text", @readonly = "true", @value = Model.Reporter.FullName } })
		</div>
	</div>

	<div class="form-group">
		@Html.LabelFor(model => model.AssigneeId, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Assignee.FullName, new { htmlAttributes = new { @class = "form-control", @type = "text", @readonly = "true", @value = Model.Assignee.FullName } })
		</div>
	</div>

	<div class="form-group">
		@Html.LabelFor(model => model.Status, htmlAttributes: new { @class = "control-label col-xs-2" })
		<div class="col-xs-10">
			@Html.EditorFor(model => model.Status, new { htmlAttributes = new { @class = "form-control", @type = "text", @readonly = "true", @value = Model.Status } })
		</div>
	</div>

	if (User.IsInRole(AppRoles.Manager))
	{
		<div class="form-group">
			<div class="col-xs-10 col-md-offset-2">
				<input type="submit" value="Delete" class="btn btn-default pull-right" id="SubmitButton" />
			</div>
		</div>
	}
}

@section scripts {
	<script src="~/Scripts/bootstrap-datepicker.min.js"></script>
	<script src="~/Scripts/bootstrap-select.min.js"></script>
	<script src="~/Scripts/jquery.validate.js"></script>
	<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
	<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>

	<script src="~/Scripts/Custom/disableInputs.js"></script>
	<script src="~/Scripts/Custom/redirect.js"></script>
	<script src="~/Scripts/Custom/setSettingsTooltips.js"></script>
}